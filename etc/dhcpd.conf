# dhcpd.conf
#
# Sample configuration file for ISC dhcpd
#

allow booting;
allow bootp;

# Time in seconds before the assigned IP address to the client can be renewed.
default-lease-time 600;

# Time in seconds before the assigned IP address to the client must be renewed.
max-lease-time 7200;

# If this DHCP server is the official DHCP server for the local network, the authoritative directive should be uncommented.
authoritative;

server-name "localserver";

option domain-name "localdomain";

# For name server see /etc/resolv.conf
# option domain-name-servers 192.168.0.1;

# Not necessary?
# option space PXE;
# option PXE.mtftp-ip    code 1 = ip-address;
# option PXE.mtftp-cport code 2 = unsigned integer 16;
# option PXE.mtftp-sport code 3 = unsigned integer 16;
# option PXE.mtftp-tmout code 4 = unsigned integer 8;
# option PXE.mtftp-delay code 5 = unsigned integer 8;

# RFC 4578
option architecture code 93 = unsigned integer 16;

group {
  # Static IP
  # 192.168.0.101/24
  subnet 192.168.0.0 netmask 255.255.255.0 {
    interface <SERVER 1 NETWORK DEVICE 1 WAN>;
    # Default gateway address to the DHCP router.
    option routers 192.168.0.101;
  }
  # 192.168.1.101/24
  subnet 192.168.1.0 netmask 255.255.255.0 {
    interface <SERVER 1 NETWORK DEVICE 2 LAN>;
    next-server 192.168.1.101;
    # Default gateway address to the DHCP router.
    option routers 192.168.1.101;
  }
  # 192.168.2.101/24
  subnet 192.168.2.0 netmask 255.255.255.0 {
    interface <SERVER 1 NETWORK DEVICE 3 LAN>;
    next-server 192.168.2.101;
    option domain-name-servers 192.168.2.101;
    # Default gateway address to the DHCP router.
    option routers 192.168.2.101;
  }
  # Dynamic IP (not tried)
  # 192.168.3.101/24
  # subnet 192.168.3.0 netmask 255.255.255.0 {
  #  interface <SERVER 1 NETWORK DEVICE 4 LAN>;
  #  Range of available IP addresses to assign to DHCP clients.
  #  range 192.168.3.102 192.168.3.199;
  #  option broadcast-address 192.168.3.255;
  #  option subnet-mask 255.255.255.0;
  # }
}

# Fixed IP addresses can also be specified for hosts.   These addresses
# should not also be listed as being available for dynamic assignment.
# Hosts for which fixed IP addresses have been specified can boot using
# BOOTP or DHCP.   Hosts for which no fixed address is specified can only
# be booted with DHCP, unless there is an address range on the subnet
# to which a BOOTP client is connected which has the dynamic-bootp flag
# set.
host <SERVER 1 NETWORK DEVICE 1 HOSTNAME> {
  hardware ethernet <SERVER 1 NETWORK DEVICE 1 MAC ADDRESS>;
  fixed-address 192.168.0.101;
  option host-name "<SERVER 1 NETWORK DEVICE 1 HOSTNAME>";
}
host <SERVER 1 NETWORK DEVICE 2 HOSTNAME> {
  hardware ethernet <SERVER 1 NETWORK DEVICE 2 MAC ADDRESS>;
  fixed-address 192.168.1.101;
  option host-name "<SERVER 1 NETWORK DEVICE 2 HOSTNAME>";
}
host <SERVER 1 NETWORK DEVICE 3 HOSTNAME> {
  hardware ethernet <SERVER 1 NETWORK DEVICE 3 MAC ADDRESS>;
  fixed-address 192.168.2.101;
  option host-name "<SERVER 1 NETWORK DEVICE 3 HOSTNAME>";
}
host <CLIENT 1 NETWORK DEVICE 1 HOSTNAME> {
  hardware ethernet <CLIENT 1 NETWORK DEVICE 1 MAC ADDRESS>;
  fixed-address 192.168.1.102;
  option host-name "<CLIENT 1 NETWORK DEVICE 1 HOSTNAME>";
  option root-path "/srv/<OS X>";

  if option architecture = 00:07 {
    filename "/netboot/grub/x86_64-efi/bootx64.efi";
  }
  else {
    filename "/netboot/grub/i386-pc/core.0";
  }
}
host <CLIENT 2 NETWORK DEVICE 1 HOSTNAME> {
  hardware ethernet <CLIENT 2 NETWORK DEVICE 1 MAC ADDRESS>;
  fixed-address 192.168.2.102;
  option host-name "<CLIENT 2 NETWORK DEVICE 1 HOSTNAME>";
  option root-path "/srv/<OS Z>";

  if option architecture = 00:07 {
    filename "/netboot/grub/x86_64-efi/bootx64.efi";
  }
  else {
    filename "/netboot/grub/i386-pc/core.0";
  }
}
# Different hardware client using the same IP as CLIENT 2.
host <CLIENT 3 NETWORK DEVICE 1 HOSTNAME> {
  hardware ethernet <CLIENT 3 NETWORK DEVICE 1 MAC ADDRESS>;
  fixed-address 192.168.2.102;
  option host-name "<CLIENT 3 NETWORK DEVICE 1 HOSTNAME>";
  option root-path "/srv/<OS Z>";
  
  # Use PXE boot.
  filename "/netboot/grub/x86_64-efi/bootx64.efi";
}


